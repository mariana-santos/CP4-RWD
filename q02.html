<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CP4-WEB/Q. 02</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./style.css" type="text/css">
</head>

<body id="questao">
    <section id="enunciado">
        <div>
            <a href="./index.html">
                <img src="./img/arrow_left.svg">
                voltar ao menu
            </a>
            
            <h1>Questão 02.</h1>
            <p>Crie um objeto funcionários crie um array com os atributos nome, idade, sexo, cargo, salário, descontos,
                dataadmissão, datademissão</p>

            <p>a) Fazer o filter de funcionários que tiveram data de admissão entre 2000 à 2010 </p>
            <p>b) Fazer um filter de funcionários que foram demitidos depois de 2018 </p>
            <p>c) Fazer um map de funcionários e trazer o nome, salário, desconto </p>
            <p>d) Criar um Reduce para somar o valor total dos descontos </p>
            <p>Exemplifique e demonstre a saída (20 pontos) </p>
        </div>
    </section>

    <section id="answer">
        <section id="info_funcs">
            <h1>Funcionários</h1>
        </section>
    </section>

    <script>

        const funcionarios = [
            {
                nome: "João",
                idade: 25,
                sexo: "Masculino",
                cargo: "Programador",
                salario: 5000,
                descontos: 1000,
                dataadmissao: "01/01/2005",
                datademissao: "06/01/2012"
            },
            {
                nome: "Maria",
                idade: 30,
                sexo: "Feminino",
                cargo: "Analista de Sistemas",
                salario: 7000,
                descontos: 1500,
                dataadmissao: "10/05/2008",
                datademissao: "05/02/2022"
            },
            {
                nome: "Pedro",
                idade: 40,
                sexo: "Masculino",
                cargo: "Gerente de Projetos",
                salario: 10000,
                descontos: 2000,
                dataadmissao: "15/09/2002",
                datademissao: "09/05/2012"
            },
            {
                nome: "Lucas",
                idade: 22,
                sexo: "M",
                cargo: "Estagiário",
                salario: 1500,
                descontos: 200,
                dataadmissao: "01/01/2022",
                datademissao: "12/03/2018"
            },
            {
                nome: "Ana",
                idade: 28,
                sexo: "F",
                cargo: "Analista",
                salario: 6000,
                descontos: 800,
                dataadmissao: "01/01/2015",
                datademissao: "12/12/2025"
            }
        ]

        const container = document.querySelector('#info_funcs');

        const funcionariosAdmitidos = funcionarios.filter(f => {
            const dataAdmissao = new Date(f.dataadmissao);
            return dataAdmissao.getFullYear() >= 2000 && dataAdmissao.getFullYear() <= 2010;
        });

        container.innerHTML += '<h2>Funcionários admitidos de 2000 à 2010: </h2>'

        funcionariosAdmitidos.forEach((funcionario) => {
            container.innerHTML += '<p>' + funcionario.nome + ' <span>admissão: ' + funcionario.dataadmissao + ' </span></p>'
        })

        const funcionariosDemitidos = funcionarios.filter(f => {
            const dataDemissao = new Date(f.datademissao)
            console.log(dataDemissao.getFullYear())
            return dataDemissao.getFullYear() > 2018;
        });

        container.innerHTML += '<h2>Funcionários demitidos depois de 2018: </h2>'

        funcionariosDemitidos.forEach((funcionario) => {
            container.innerHTML += '<p>' + funcionario.nome + ' <span>demissão: ' + funcionario.datademissao + ' </span></p>'
        })

        container.innerHTML += '<h2>Map dos funcionários: </h2>'

        const funcionariosMap = funcionarios.map((funcionario) => {
            container.innerHTML += '<p>' + funcionario.nome + ' ganha R$' + funcionario.salario + ' e tem R$' + funcionario.descontos + '  de descontos</p>'
            return {
                nome: funcionario.nome,
                salario: funcionario.salario,
                descontos: funcionario.descontos,
            };
        });

        const totalDescontos = funcionarios.reduce((total, f) => {
            return total + f.descontos;
        }, 0);

        container.innerHTML += `<p style="margin-top: 1em">O total de descontos é: R$ ${totalDescontos.toLocaleString("pt-BR")}</p>`;

    </script>
</body>

</html>